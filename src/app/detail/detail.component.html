<div class="holder">
  <mat-card  class="mat-elevation-z4">
    <mat-card-title-group>
      <mat-card-title>
        {{(fountain| async).properties['name_'+(lang|async)].value}}
        <span *ngIf="!(fountain| async).properties.name.value">{{'other.unnamed_fountain' | translate}}</span>
      </mat-card-title>
      <mat-card-subtitle>
        <span class="badge"
              *ngIf="(fountain| async).properties.water_type.value"
              [ngClass]="(fountain| async).properties.water_type.value"
              title="{{'property.water_type'| translate}}">
          {{(fountain| async).properties.water_type.value | translate}}</span>
        <span class="badge year"
              *ngIf="(fountain| async).properties.construction_date.value"
              title="{{'property.construction_date'| translate}}">
          <span >{{(fountain| async).properties.construction_date.value}}</span>
        </span>
        <span class="badge access_pet" *ngIf="(fountain| async).properties.access_pet.value"
              title="{{'property.access_pet'| translate}}"><mat-icon>pets</mat-icon></span>
      </mat-card-subtitle>
    </mat-card-title-group>

    <ngx-gallery [options]="galleryOptions" [images]="(fountain| async).properties.gallery.value" (previewOpen)="setPreviewState('open')" (previewClose)="setPreviewState('closed')"></ngx-gallery>
    <a href="{{(fountain| async).properties.pano_url.value}}" target="_blank" translate>detail.street_level_view</a>

    <mat-card-content>
      <div *ngIf="(fountain| async).properties.directions.value !== null">
        <h3 translate>property.directions</h3>
        <p>{{(fountain| async).properties.directions.value}}</p>
      </div>
      <div *ngIf="(fountain| async).properties.description_short.value !== null">
        <h3 translate>property.description_short</h3>
        <p>{{(fountain| async).properties.description_short.value}}</p>
      </div>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title translate>detail.show_all_properties</mat-panel-title>
        </mat-expansion-panel-header>
        <table>
          <tbody>
          <tr *ngFor="let p of tableProperties">
              <td class="propName" >{{'property.'+p | translate}}</td>
              <td class="propVal"><f-property [pName]="p"></f-property></td>
            </tr>
          <tr>
              <td class="propName">Merge notes</td>
              <td class="propVal">{{(fountain| async).properties.merge_notes}}</td>
            </tr><tr>
              <td class="propName">Merge distance</td>
              <td class="propVal">{{(fountain| async).properties.merge_distance | number:'1.2'}} m</td>
            </tr>
          </tbody>

        </table>
      </mat-expansion-panel>
      <p translate>detail.how_to_refresh_message</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="navigateToFountain()">
        <mat-icon>navigation</mat-icon><span translate>action.navigate</span>
      </button>
      <button mat-button color="primary" (click)="forceRefresh()">
        <mat-icon>refresh</mat-icon><span translate>action.refresh</span>
      </button>
      <button mat-button color="warn" (click)="returnToMap()">
        <mat-icon>close</mat-icon><span translate>action.close</span>
      </button>
    </mat-card-actions>
  </mat-card>

</div>

