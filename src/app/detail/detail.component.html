<div class="holder">
  <mat-card  class="mat-elevation-z4">
    <mat-card-title-group>
      <mat-card-title>
        {{(fountain| async).properties.name_de.value }}
      </mat-card-title>
      <mat-card-subtitle>
        <span class="badge access_pet" *ngIf="(fountain| async).properties.access_pet.value"><mat-icon>pets</mat-icon> pet access</span>
        <span class="badge" [ngClass]="(fountain| async).properties.water_type.value">{{(fountain| async).properties.water_type.value }}</span>
      </mat-card-subtitle>
    </mat-card-title-group>
    <ngx-gallery [options]="galleryOptions" [images]="(fountain| async).properties.gallery.value" (previewOpen)="setPreviewState('open')" (previewClose)="setPreviewState('closed')"></ngx-gallery>
    <a href="{{(fountain| async).properties.pano_url.value}}" target="_blank">
      View in Street View
    </a>
    <mat-card-content>
      <p>Location: {{(fountain| async).properties.directions.value }}</p>
      <p>Construction date: {{(fountain| async).properties.construction_date.value }}</p>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Fountain details</mat-panel-title>
        </mat-expansion-panel-header>
        <table>
          <tbody>
          <tr>
              <td class="propName">Fountain name</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.name"></f-property></td>
            </tr><tr>
              <td class="propName">Water type</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.water_type"></f-property></td>
            </tr><tr>
              <td class="propName">Location</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.directions"></f-property></td>
            </tr><tr>
              <td class="propName">Construction date</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.construction_date"></f-property></td>
            </tr><tr>
              <td class="propName">Pet access</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.access_pet"></f-property></td>
            </tr><tr>
              <td class="propName">Wikipedia page (en)</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.wikipedia_en_url"> </f-property></td>
            </tr><tr>
              <td class="propName">Wikipedia page (de)</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.wikipedia_de_url"> </f-property></td>
            </tr><tr>
              <td class="propName">Operator name</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.operator_name"></f-property></td>
            </tr><tr>
              <td class="propName">Operator ID</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.id_operator"></f-property></td>
            </tr><tr>
              <td class="propName">Open Street Map ID</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.id_osm"></f-property></td>
            </tr><tr>
              <td class="propName">Wikidata ID</td>
              <td class="propVal"><f-property [prop]="(fountain| async).properties.id_wikidata"></f-property></td>
            </tr><tr>
              <td class="propName">Merge notes</td>
              <td class="propVal">{{(fountain| async).properties.merge_notes}}</td>
            </tr><tr>
              <td class="propName">Merge distance</td>
              <td class="propVal">{{(fountain| async).properties.merge_distance | number:'1.2'}} m</td>
            </tr>
          </tbody>

        </table>
      </mat-expansion-panel>
      <p>Is data out-of-date? The database is refreshed every 2 hours, but you can preview the latest data by clicking the "preview current data" button below. Changes will only be visible within this panel until the main database is refreshed.</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="navigateToFountain()">
        <mat-icon>navigation</mat-icon><span i18n="navigate to fountain command">navigate</span>
      </button>
      <button mat-button color="primary" (click)="forceRefresh()">
        <mat-icon>refresh</mat-icon><span i18n="refresh data command">preview current data</span>
      </button>
      <button mat-button color="primary" (click)="openGuideSelector()">
        <mat-icon>school</mat-icon><span i18n="close details command"> guides</span>
      </button>
      <button mat-button color="warn" (click)="returnToRoot()">
        <mat-icon>close</mat-icon><span i18n="close details command">close</span>
      </button>
    </mat-card-actions>
  </mat-card>

</div>

